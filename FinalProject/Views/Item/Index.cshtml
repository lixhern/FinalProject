@{

    <div class="row mb-4 mt-4">
        <div class="d-flex justify-content-between align-item-center">
            <div>
                <h4>@Model.Item.Name</h4>
            </div>
            <!--<div>
            @if (User.Identity.IsAuthenticated && (User.IsInRole("admin") || User.Identity.Name == Model.Item.User.UserName))
            {
                // <a asp-area="" asp-route-id="@Model.Item.Id" asp-controller="Item" asp-action="Delete" class="btn btn-danger lang" key="delete">Delete</a>
            }
                                                </div>-->

        </div>
    </div>

    <table class="table">
        <tbody>
            <tr>
                <th scope="col" class="lang" key="authorI">Author of the item:</th>
                <th scope="col">@Model.Item.User.UserName</th>
            </tr>
            <tr>
                <th scope="col" class="lang" key="nameI">Collection name:</th>
                <th scope="col">@Model.Item.Collection.Name</th>
            </tr>
            @if (Model.Item.Collection.CustomString1State)
            {
                <tr>
                    <th scope="col">@Model.Item.Collection.CustomString1Name</th>
                    <th scope="col">@Model.Item.CustomString1</th>
                </tr>
            }
            @if (Model.Item.Collection.CustomString2State)
            {
                <tr>
                    <th scope="col">@Model.Item.Collection.CustomString2Name</th>
                    <th scope="col">@Model.Item.CustomString2</th>
                </tr>
            }
            @if (Model.Item.Collection.CustomString3State)
            {
                <tr>
                    <th scope="col">@Model.Item.Collection.CustomString3Name</th>
                    <th scope="col">@Model.Item.CustomString3</th>
                </tr>
            }
            <tr>
                <th scope="col" class="lang" key="tags2">Tags</th>
                <th scope="col">
                    @foreach (var tag in Model.Item.Tags)
                    {
                        <a asp-area="" asp-route-tagName="@tag.Name" asp-controller="Item" asp-action="ItemsByTag"><em>#@tag.Name</em></a>
                        
                    }
                </th>
            </tr>
        </tbody>
    </table>

    <div class="d-flex justify-content-between align-item-center">
        <div class="col-6">
            <div class="mb-2 p-1">
                <h5>Comments:</h5>
                <div id="comments">
                    @foreach (var comment in Model.Item.Comments)
                    {

                        <div class="mb-1 p-1 border rounded-1" id="comment-@comment.Id">
                            <div class="d-flex justify-content-between align-item-center ">
                                <em>@comment.UserName:</em>
                                @if (User.Identity.IsAuthenticated && (User.IsInRole("admin") || User.Identity.Name.Equals(Model.Item.Name)))
                                {
                                    <a id="deleteBtn" asp-area="" asp-route-commentId="@comment.Id" asp-controller="Comment" asp-action="DeleteComment">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-x" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M6.146 5.146a.5.5 0 0 1 .708 0L8 6.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 7l1.147 1.146a.5.5 0 0 1-.708.708L8 7.707 6.854 8.854a.5.5 0 1 1-.708-.708L7.293 7 6.146 5.854a.5.5 0 0 1 0-.708" />
                                            <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1z" />
                                        </svg>
                                    </a>
                                }
                            </div>
                            <div style="margin-left: 30px ">@comment.Text</div>

                        </div>


                    }
                </div>
            </div>
            @if (User.Identity.IsAuthenticated)
            {
                <form id="commentForm" asp-area="" asp-controller="Comment" asp-action="AddComment">
                    <input type="hidden" name="ItemId" value="@Model.Item.Id" />
                    <input type="hidden" name="userName" value="@User.Identity.Name" />
                    <textarea class="form-control mb-2" rows="3" name="Comment" id="commentArea"></textarea>
                    <button type="submit" class="btn btn-outline-success" id="commentBtn">Добавить комментарий</button>
                </form>
            }
        </div>
        <div>
            @if (User.Identity.IsAuthenticated)
            {
                <div>

                    <a class="btn btn-outline-danger" id="likeBtn" data-item-id="@Model.Item.Id" asp-area="" asp-route-itemId="@Model.Item.Id" asp-route-UserName="@User.Identity.Name" asp-controller="Like" asp-action="Like">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-suit-heart" viewBox="0 0 16 16">
                            <path d="m8 6.236-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.6 7.6 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z" />
                        </svg>
                        <t style="color: white" class="">:<span id="likesCount">@Model.LikesCount</t>
                    </a>

                </div>
            }
            else
            {
                <a class="btn btn-outline-danger " disable data-item-id="@Model.Item.Id" id="likeBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-suit-heart" viewBox="0 0 16 16">
                        <path d="m8 6.236-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.6 7.6 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z" />
                    </svg>
                    <t style="color: white">:<span id="likesCount">@Model.LikesCount</t>
                </a>
            }
        </div>
    </div>


    <script src="~/js/signalr/dist/browser/signalr.min.js"></script>

    <script src="~/js/commentLike.js"></script>

}